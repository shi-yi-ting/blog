import{ac as le,aD as Ee,e as Te,H as _n,i as L,I as $n,j as _,D as Y,P as xe,c5 as jn,r as te,F as D,y as ga,G as we,x as Gn,g as Hn,A as Wn,aZ as Be,C as Ke,bq as Fe,m as me,bt as ze,aW as Me,bA as pa,E as Cn,c0 as Ka,z as ke,J as Nn,K as ka,w as ba,v as xa,af as ma,O as Ca,L as Sn,as as sn,h as Na,b4 as Ie,b7 as Sa,cO as Un,cP as Da,cQ as Ea,cR as wa,bi as Oa,ak as Pa,B as Vn,aV as Ta,cS as La,cT as Ia}from"./index-28e7baee.js";import{p as Yn,_ as qn,L as Aa}from"./index-99cbf15b.js";import{d as Fa}from"./debounce-2e5a75af.js";function pe(n){var e=le();return Ee(function(){e.value=n()},{flush:"sync"}),e}var zn=Symbol("TreeContextKey"),Ma=Te({compatConfig:{MODE:3},name:"TreeContext",props:{value:{type:Object}},setup:function(e,t){var l=t.slots;return _n(zn,L(function(){return e.value})),function(){var o;return(o=l.default)===null||o===void 0?void 0:o.call(l)}}}),Dn=function(){return $n(zn,L(function(){return{}}))},Xn=Symbol("KeysStateKey"),Ba=function(e){_n(Xn,e)},Jn=function(){return $n(Xn,{expandedKeys:le([]),selectedKeys:le([]),loadedKeys:le([]),loadingKeys:le([]),checkedKeys:le([]),halfCheckedKeys:le([]),expandedKeysSet:L(function(){return new Set}),selectedKeysSet:L(function(){return new Set}),loadedKeysSet:L(function(){return new Set}),loadingKeysSet:L(function(){return new Set}),checkedKeysSet:L(function(){return new Set}),halfCheckedKeysSet:L(function(){return new Set}),flattenNodes:le([])})},Ra=function(e){for(var t=e.prefixCls,l=e.level,o=e.isStart,c=e.isEnd,d="".concat(t,"-indent-unit"),r=[],u=0;u<l;u+=1){var f;r.push(_("span",{key:u,class:(f={},Y(f,d,!0),Y(f,"".concat(d,"-start"),o[u]),Y(f,"".concat(d,"-end"),c[u]),f)},null))}return _("span",{"aria-hidden":"true",class:"".concat(t,"-indent")},[r])};const _a=Ra;var Qn={eventKey:[String,Number],prefixCls:String,title:xe.any,data:{type:Object,default:void 0},parent:{type:Object,default:void 0},isStart:{type:Array},isEnd:{type:Array},active:{type:Boolean,default:void 0},onMousemove:{type:Function},isLeaf:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},disableCheckbox:{type:Boolean,default:void 0},icon:xe.any,switcherIcon:xe.any,domRef:{type:Function}},$a={prefixCls:{type:String},motion:{type:Object},focusable:{type:Boolean},activeItem:{type:Object},focused:{type:Boolean},tabindex:{type:Number},checkable:{type:Boolean},selectable:{type:Boolean},disabled:{type:Boolean},height:{type:Number},itemHeight:{type:Number},virtual:{type:Boolean},onScroll:{type:Function},onKeydown:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onActiveChange:{type:Function},onContextmenu:{type:Function},onListChangeStart:{type:Function},onListChangeEnd:{type:Function}},Zn=function(){return{prefixCls:String,focusable:{type:Boolean,default:void 0},activeKey:[Number,String],tabindex:Number,children:xe.any,treeData:{type:Array},fieldNames:{type:Object},showLine:{type:[Boolean,Object],default:void 0},showIcon:{type:Boolean,default:void 0},icon:xe.any,selectable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},draggable:{type:[Function,Boolean]},defaultExpandParent:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:[Object,Array]},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},allowDrop:{type:Function},dropIndicatorRender:{type:Function},onFocus:{type:Function},onBlur:{type:Function},onKeydown:{type:Function},onContextmenu:{type:Function},onClick:{type:Function},onDblclick:{type:Function},onScroll:{type:Function},onExpand:{type:Function},onCheck:{type:Function},onSelect:{type:Function},onLoad:{type:Function},loadData:{type:Function},loadedKeys:{type:Array},onMouseenter:{type:Function},onMouseleave:{type:Function},onRightClick:{type:Function},onDragstart:{type:Function},onDragenter:{type:Function},onDragover:{type:Function},onDragleave:{type:Function},onDragend:{type:Function},onDrop:{type:Function},onActiveChange:{type:Function},filterTreeNode:{type:Function},motion:xe.any,switcherIcon:xe.any,height:Number,itemHeight:Number,virtual:{type:Boolean,default:void 0},direction:{type:String}}},ja=["eventKey","isLeaf","isStart","isEnd","domRef","active","data","onMousemove","selectable"],On="open",Pn="close",Ga="---";const pn=Te({compatConfig:{MODE:3},name:"ATreeNode",inheritAttrs:!1,props:Qn,isTreeNode:1,slots:["title","icon","switcherIcon"],setup:function(e,t){var l=t.attrs,o=t.slots,c=t.expose;jn(!("slots"in e.data),"treeData slots is deprecated, please use ".concat(Object.keys(e.data.slots||{}).map(function(C){return"`v-slot:"+C+"` "}),"instead"));var d=te(!1),r=Dn(),u=Jn(),f=u.expandedKeysSet,k=u.selectedKeysSet,g=u.loadedKeysSet,p=u.loadingKeysSet,N=u.checkedKeysSet,m=u.halfCheckedKeysSet,E=r.value,a=E.dragOverNodeKey,h=E.dropPosition,K=E.keyEntities,P=L(function(){return bn(e.eventKey,{expandedKeysSet:f.value,selectedKeysSet:k.value,loadedKeysSet:g.value,loadingKeysSet:p.value,checkedKeysSet:N.value,halfCheckedKeysSet:m.value,dragOverNodeKey:a,dropPosition:h,keyEntities:K})}),B=pe(function(){return P.value.expanded}),$=pe(function(){return P.value.selected}),V=pe(function(){return P.value.checked}),ae=pe(function(){return P.value.loaded}),U=pe(function(){return P.value.loading}),I=pe(function(){return P.value.halfChecked}),Z=pe(function(){return P.value.dragOver}),w=pe(function(){return P.value.dragOverGapTop}),O=pe(function(){return P.value.dragOverGapBottom}),A=pe(function(){return P.value.pos}),j=te(),re=L(function(){var C=e.eventKey,i=r.value.keyEntities,b=i[C]||{},G=b.children;return!!(G||[]).length}),q=L(function(){var C=e.isLeaf,i=r.value.loadData,b=re.value;return C===!1?!1:C||!i&&!b||i&&ae.value&&!b}),ie=L(function(){return q.value?null:B.value?On:Pn}),W=L(function(){var C=e.disabled,i=r.value.disabled;return!!(i||C)}),X=L(function(){var C=e.checkable,i=r.value.checkable;return!i||C===!1?!1:i}),ue=L(function(){var C=e.selectable,i=r.value.selectable;return typeof C=="boolean"?C:i}),J=L(function(){var C=e.data,i=e.active,b=e.checkable,G=e.disableCheckbox,x=e.disabled,s=e.selectable;return D(D({active:i,checkable:b,disableCheckbox:G,disabled:x,selectable:s},C),{},{dataRef:C,data:C,isLeaf:q.value,checked:V.value,expanded:B.value,loading:U.value,selected:$.value,halfChecked:I.value})}),fe=ga(),de=L(function(){var C=e.eventKey,i=r.value.keyEntities,b=i[C]||{},G=b.parent;return D(D({},xn(we({},e,P.value))),{},{parent:G})}),ye=Gn({eventData:de,eventKey:L(function(){return e.eventKey}),selectHandle:j,pos:A,key:fe.vnode.key});c(ye);var Ce=function(i){var b=r.value.onNodeDoubleClick;b(i,de.value)},_e=function(i){if(!W.value){var b=r.value.onNodeSelect;i.preventDefault(),b(i,de.value)}},Ae=function(i){if(!W.value){var b=e.disableCheckbox,G=r.value.onNodeCheck;if(!(!X.value||b)){i.preventDefault();var x=!V.value;G(i,de.value,x)}}},$e=function(i){var b=r.value.onNodeClick;b(i,de.value),ue.value?_e(i):Ae(i)},Je=function(i){var b=r.value.onNodeMouseEnter;b(i,de.value)},Qe=function(i){var b=r.value.onNodeMouseLeave;b(i,de.value)},Ze=function(i){var b=r.value.onNodeContextMenu;b(i,de.value)},en=function(i){var b=r.value.onNodeDragStart;i.stopPropagation(),d.value=!0,b(i,ye);try{i.dataTransfer.setData("text/plain","")}catch{}},nn=function(i){var b=r.value.onNodeDragEnter;i.preventDefault(),i.stopPropagation(),b(i,ye)},an=function(i){var b=r.value.onNodeDragOver;i.preventDefault(),i.stopPropagation(),b(i,ye)},tn=function(i){var b=r.value.onNodeDragLeave;i.stopPropagation(),b(i,ye)},je=function(i){var b=r.value.onNodeDragEnd;i.stopPropagation(),d.value=!1,b(i,ye)},Ge=function(i){var b=r.value.onNodeDrop;i.preventDefault(),i.stopPropagation(),d.value=!1,b(i,ye)},He=function(i){var b=r.value.onNodeExpand;U.value||b(i,de.value)},rn=function(){var i=e.data,b=r.value.draggable;return!!(b&&(!b.nodeDraggable||b.nodeDraggable(i)))},on=function(){var i=r.value,b=i.draggable,G=i.prefixCls;return b&&b!==null&&b!==void 0&&b.icon?_("span",{class:"".concat(G,"-draggable-icon")},[b.icon]):null},ln=function(){var i,b,G,x=e.switcherIcon,s=x===void 0?o.switcherIcon||((i=r.value.slots)===null||i===void 0?void 0:i[(b=e.data)===null||b===void 0||(G=b.slots)===null||G===void 0?void 0:G.switcherIcon]):x,v=r.value.switcherIcon,y=s||v;return typeof y=="function"?y(J.value):y},We=function(){var i=r.value,b=i.loadData,G=i.onNodeLoad;U.value||b&&B.value&&!q.value&&!re.value&&!ae.value&&G(de.value)};Hn(function(){We()}),Wn(function(){We()});var dn=function(){var i=r.value.prefixCls,b=ln();if(q.value)return b!==!1?_("span",{class:Ke("".concat(i,"-switcher"),"".concat(i,"-switcher-noop"))},[b]):null;var G=Ke("".concat(i,"-switcher"),"".concat(i,"-switcher_").concat(B.value?On:Pn));return b!==!1?_("span",{onClick:He,class:G},[b]):null},Le=function(){var i,b,G=e.disableCheckbox,x=r.value.prefixCls,s=W.value,v=X.value;return v?_("span",{class:Ke("".concat(x,"-checkbox"),V.value&&"".concat(x,"-checkbox-checked"),!V.value&&I.value&&"".concat(x,"-checkbox-indeterminate"),(s||G)&&"".concat(x,"-checkbox-disabled")),onClick:Ae},[(i=(b=r.value).customCheckable)===null||i===void 0?void 0:i.call(b)]):null},Ue=function(){var i=r.value.prefixCls;return _("span",{class:Ke("".concat(i,"-iconEle"),"".concat(i,"-icon__").concat(ie.value||"docu"),U.value&&"".concat(i,"-icon_loading"))},null)},cn=function(){var i=e.disabled,b=e.eventKey,G=r.value,x=G.draggable,s=G.dropLevelOffset,v=G.dropPosition,y=G.prefixCls,R=G.indent,F=G.dropIndicatorRender,T=G.dragOverNodeKey,S=G.direction,M=x!==!1,H=!i&&M&&T===b;return H?F({dropPosition:v,dropLevelOffset:s,indent:R,prefixCls:y,direction:S}):null},Ne=function(){var i,b,G,x,s=e.icon,v=s===void 0?o.icon:s,y=e.data,R=o.title||((i=r.value.slots)===null||i===void 0?void 0:i[(b=e.data)===null||b===void 0||(G=b.slots)===null||G===void 0?void 0:G.title])||((x=r.value.slots)===null||x===void 0?void 0:x.title)||e.title,F=r.value,T=F.prefixCls,S=F.showIcon,M=F.icon,H=F.loadData,z=W.value,Q="".concat(T,"-node-content-wrapper"),ee;if(S){var oe,ce,ve=v||((oe=r.value.slots)===null||oe===void 0?void 0:oe[y==null||(ce=y.slots)===null||ce===void 0?void 0:ce.icon])||M;ee=ve?_("span",{class:Ke("".concat(T,"-iconEle"),"".concat(T,"-icon__customize"))},[typeof ve=="function"?ve(J.value):ve]):Ue()}else H&&U.value&&(ee=Ue());var se;typeof R=="function"?se=R(J.value):se=R,se=se===void 0?Ga:se;var ne=_("span",{class:"".concat(T,"-title")},[se]);return _("span",{ref:j,title:typeof R=="string"?R:"",class:Ke("".concat(Q),"".concat(Q,"-").concat(ie.value||"normal"),!z&&($.value||d.value)&&"".concat(T,"-node-selected")),onMouseenter:Je,onMouseleave:Qe,onContextmenu:Ze,onClick:$e,onDblclick:Ce},[ee,ne,cn()])};return function(){var C,i=D(D({},e),l),b=i.eventKey,G=i.isLeaf,x=i.isStart,s=i.isEnd,v=i.domRef,y=i.active;i.data;var R=i.onMousemove,F=i.selectable,T=Be(i,ja),S=r.value,M=S.prefixCls,H=S.filterTreeNode,z=S.keyEntities,Q=S.dropContainerKey,ee=S.dropTargetKey,oe=S.draggingNodeKey,ce=W.value,ve=Yn(T,{aria:!0,data:!0}),se=z[b]||{},ne=se.level,he=s[s.length-1],ge=rn(),Se=!ce&&ge,Ve=oe===b,un=F!==void 0?{"aria-selected":!!F}:void 0;return _("div",D(D({ref:v,class:Ke(l.class,"".concat(M,"-treenode"),(C={},Y(C,"".concat(M,"-treenode-disabled"),ce),Y(C,"".concat(M,"-treenode-switcher-").concat(B.value?"open":"close"),!G),Y(C,"".concat(M,"-treenode-checkbox-checked"),V.value),Y(C,"".concat(M,"-treenode-checkbox-indeterminate"),I.value),Y(C,"".concat(M,"-treenode-selected"),$.value),Y(C,"".concat(M,"-treenode-loading"),U.value),Y(C,"".concat(M,"-treenode-active"),y),Y(C,"".concat(M,"-treenode-leaf-last"),he),Y(C,"".concat(M,"-treenode-draggable"),Se),Y(C,"dragging",Ve),Y(C,"drop-target",ee===b),Y(C,"drop-container",Q===b),Y(C,"drag-over",!ce&&Z.value),Y(C,"drag-over-gap-top",!ce&&w.value),Y(C,"drag-over-gap-bottom",!ce&&O.value),Y(C,"filter-node",H&&H(de.value)),C)),style:l.style,draggable:Se,"aria-grabbed":Ve,onDragstart:Se?en:void 0,onDragenter:ge?nn:void 0,onDragover:ge?an:void 0,onDragleave:ge?tn:void 0,onDrop:ge?Ge:void 0,onDragend:ge?je:void 0,onMousemove:R},un),ve),[_(_a,{prefixCls:M,level:ne,isStart:x,isEnd:s},null),on(),dn(),Le(),Ne()])}}});function De(n,e){if(!n)return[];var t=n.slice(),l=t.indexOf(e);return l>=0&&t.splice(l,1),t}function Oe(n,e){var t=(n||[]).slice();return t.indexOf(e)===-1&&t.push(e),t}function En(n){return n.split("-")}function ea(n,e){return"".concat(n,"-").concat(e)}function Ha(n){return n&&n.type&&n.type.isTreeNode}function Wa(n,e){var t=[],l=e[n];function o(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];c.forEach(function(d){var r=d.key,u=d.children;t.push(r),o(u)})}return o(l.children),t}function Ua(n){if(n.parent){var e=En(n.pos);return Number(e[e.length-1])===n.parent.children.length-1}return!1}function Va(n){var e=En(n.pos);return Number(e[e.length-1])===0}function Tn(n,e,t,l,o,c,d,r,u,f){var k,g=n.clientX,p=n.clientY,N=n.target.getBoundingClientRect(),m=N.top,E=N.height,a=(f==="rtl"?-1:1)*(((o==null?void 0:o.x)||0)-g),h=(a-12)/l,K=r[t.eventKey];if(p<m+E/2){var P=d.findIndex(function(re){return re.key===K.key}),B=P<=0?0:P-1,$=d[B].key;K=r[$]}var V=K.key,ae=K,U=K.key,I=0,Z=0;if(!u.has(V))for(var w=0;w<h&&Ua(K);w+=1)K=K.parent,Z+=1;var O=e.eventData,A=K.node,j=!0;return Va(K)&&K.level===0&&p<m+E/2&&c({dragNode:O,dropNode:A,dropPosition:-1})&&K.key===t.eventKey?I=-1:(ae.children||[]).length&&u.has(U)?c({dragNode:O,dropNode:A,dropPosition:0})?I=0:j=!1:Z===0?h>-1.5?c({dragNode:O,dropNode:A,dropPosition:1})?I=1:j=!1:c({dragNode:O,dropNode:A,dropPosition:0})?I=0:c({dragNode:O,dropNode:A,dropPosition:1})?I=1:j=!1:c({dragNode:O,dropNode:A,dropPosition:1})?I=1:j=!1,{dropPosition:I,dropLevelOffset:Z,dropTargetKey:K.key,dropTargetPos:K.pos,dragOverNodeKey:U,dropContainerKey:I===0?null:((k=K.parent)===null||k===void 0?void 0:k.key)||null,dropAllowed:j}}function Ln(n,e){if(n){var t=e.multiple;return t?n.slice():n.length?[n[0]]:n}}function vn(n){if(!n)return null;var e;if(Array.isArray(n))e={checkedKeys:n,halfCheckedKeys:void 0};else if(Fe(n)==="object")e={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};else return null;return e}function Kn(n,e){var t=new Set;function l(o){if(!t.has(o)){var c=e[o];if(c){t.add(o);var d=c.parent,r=c.node;r.disabled||d&&l(d.key)}}}return(n||[]).forEach(function(o){l(o)}),me(t)}var Ya=["title","icon","switcherIcon"];function Re(n,e){return n??e}function Xe(n){var e=n||{},t=e.title,l=e._title,o=e.key,c=e.children,d=t||"title";return{title:d,_title:l||[d],key:o||"key",children:c||"children"}}function kn(n){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=ze(t);return l.map(function(o){var c,d,r,u;if(!Ha(o))return null;for(var f=o.children||{},k=o.key,g={},p=0,N=Object.entries(o.props);p<N.length;p++){var m=Me(N[p],2),E=m[0],a=m[1];g[pa(E)]=a}var h=g.isLeaf,K=g.checkable,P=g.selectable,B=g.disabled,$=g.disableCheckbox,V={isLeaf:h||h===""||void 0,checkable:K||K===""||void 0,selectable:P||P===""||void 0,disabled:B||B===""||void 0,disableCheckbox:$||$===""||void 0},ae=D(D({},g),V),U=g.title,I=U===void 0?(c=f.title)===null||c===void 0?void 0:c.call(f,ae):U,Z=g.icon,w=Z===void 0?(d=f.icon)===null||d===void 0?void 0:d.call(f,ae):Z,O=g.switcherIcon,A=O===void 0?(r=f.switcherIcon)===null||r===void 0?void 0:r.call(f,ae):O,j=Be(g,Ya),re=(u=f.default)===null||u===void 0?void 0:u.call(f),q=D(D({},j),{},{title:I,icon:w,switcherIcon:A,key:k,isLeaf:h},V),ie=e(re);return ie.length&&(q.children=ie),q})}return e(n)}function qa(n,e,t){var l=Xe(t),o=l._title,c=l.key,d=l.children,r=new Set(e===!0?[]:e),u=[];function f(k){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return k.map(function(p,N){for(var m=ea(g?g.pos:"0",N),E=Re(p[c],m),a,h=0;h<o.length;h+=1){var K=o[h];if(p[K]!==void 0){a=p[K];break}}var P=D(D({},Cn(p,[].concat(me(o),[c,d]))),{},{title:a,key:E,parent:g,pos:m,children:null,data:p,isStart:[].concat(me(g?g.isStart:[]),[N===0]),isEnd:[].concat(me(g?g.isEnd:[]),[N===k.length-1])});return u.push(P),e===!0||r.has(E)?P.children=f(p[d]||[],P):P.children=[],P})}return f(n),u}function za(n,e,t){var l={};Fe(t)==="object"?l=t:l={externalGetKey:t},l=l||{};var o=l,c=o.childrenPropName,d=o.externalGetKey,r=o.fieldNames,u=Xe(r),f=u.key,k=u.children,g=c||k,p;d?typeof d=="string"?p=function(E){return E[d]}:typeof d=="function"&&(p=function(E){return d(E)}):p=function(E,a){return Re(E[f],a)};function N(m,E,a,h){var K=m?m[g]:n,P=m?ea(a.pos,E):"0",B=m?[].concat(me(h),[m]):[];if(m){var $=p(m,P),V={node:m,index:E,pos:P,key:$,parentPos:a.node?a.pos:null,level:a.level+1,nodes:B};e(V)}K&&K.forEach(function(ae,U){N(ae,U,{node:m,pos:P,level:a?a.level+1:-1},B)})}N(null)}function na(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.initWrapper,l=e.processEntity,o=e.onProcessFinished,c=e.externalGetKey,d=e.childrenPropName,r=e.fieldNames,u=arguments.length>2?arguments[2]:void 0,f=c||u,k={},g={},p={posEntities:k,keyEntities:g};return t&&(p=t(p)||p),za(n,function(N){var m=N.node,E=N.index,a=N.pos,h=N.key,K=N.parentPos,P=N.level,B=N.nodes,$={node:m,nodes:B,index:E,key:h,pos:a,level:P},V=Re(h,a);k[a]=$,g[V]=$,$.parent=k[K],$.parent&&($.parent.children=$.parent.children||[],$.parent.children.push($)),l&&l($,p)},{externalGetKey:f,childrenPropName:d,fieldNames:r}),o&&o(p),p}function bn(n,e){var t=e.expandedKeysSet,l=e.selectedKeysSet,o=e.loadedKeysSet,c=e.loadingKeysSet,d=e.checkedKeysSet,r=e.halfCheckedKeysSet,u=e.dragOverNodeKey,f=e.dropPosition,k=e.keyEntities,g=k[n],p={eventKey:n,expanded:t.has(n),selected:l.has(n),loaded:o.has(n),loading:c.has(n),checked:d.has(n),halfChecked:r.has(n),pos:String(g?g.pos:""),parent:g.parent,dragOver:u===n&&f===0,dragOverGapTop:u===n&&f===-1,dragOverGapBottom:u===n&&f===1};return p}function xn(n){var e=n.data,t=n.expanded,l=n.selected,o=n.checked,c=n.loaded,d=n.loading,r=n.halfChecked,u=n.dragOver,f=n.dragOverGapTop,k=n.dragOverGapBottom,g=n.pos,p=n.active,N=n.eventKey,m=D(D({dataRef:e},e),{},{expanded:t,selected:l,checked:o,loaded:c,loading:d,halfChecked:r,dragOver:u,dragOverGapTop:f,dragOverGapBottom:k,pos:g,active:p,eventKey:N,key:N});return"props"in m||Object.defineProperty(m,"props",{get:function(){return n}}),m}function aa(n,e){var t=new Set;return n.forEach(function(l){e.has(l)||t.add(l)}),t}function Xa(n){var e=n||{},t=e.disabled,l=e.disableCheckbox,o=e.checkable;return!!(t||l)||o===!1}function Ja(n,e,t,l){for(var o=new Set(n),c=new Set,d=0;d<=t;d+=1){var r=e.get(d)||new Set;r.forEach(function(g){var p=g.key,N=g.node,m=g.children,E=m===void 0?[]:m;o.has(p)&&!l(N)&&E.filter(function(a){return!l(a.node)}).forEach(function(a){o.add(a.key)})})}for(var u=new Set,f=t;f>=0;f-=1){var k=e.get(f)||new Set;k.forEach(function(g){var p=g.parent,N=g.node;if(!(l(N)||!g.parent||u.has(g.parent.key))){if(l(g.parent.node)){u.add(p.key);return}var m=!0,E=!1;(p.children||[]).filter(function(a){return!l(a.node)}).forEach(function(a){var h=a.key,K=o.has(h);m&&!K&&(m=!1),!E&&(K||c.has(h))&&(E=!0)}),m&&o.add(p.key),E&&c.add(p.key),u.add(p.key)}})}return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(aa(c,o))}}function Qa(n,e,t,l,o){for(var c=new Set(n),d=new Set(e),r=0;r<=l;r+=1){var u=t.get(r)||new Set;u.forEach(function(p){var N=p.key,m=p.node,E=p.children,a=E===void 0?[]:E;!c.has(N)&&!d.has(N)&&!o(m)&&a.filter(function(h){return!o(h.node)}).forEach(function(h){c.delete(h.key)})})}d=new Set;for(var f=new Set,k=l;k>=0;k-=1){var g=t.get(k)||new Set;g.forEach(function(p){var N=p.parent,m=p.node;if(!(o(m)||!p.parent||f.has(p.parent.key))){if(o(p.parent.node)){f.add(N.key);return}var E=!0,a=!1;(N.children||[]).filter(function(h){return!o(h.node)}).forEach(function(h){var K=h.key,P=c.has(K);E&&!P&&(E=!1),!a&&(P||d.has(K))&&(a=!0)}),E||c.delete(N.key),a&&d.add(N.key),f.add(N.key)}})}return{checkedKeys:Array.from(c),halfCheckedKeys:Array.from(aa(d,c))}}function fn(n,e,t,l,o,c){var d;c?d=c:d=Xa;var r=new Set(n.filter(function(f){var k=!!t[f];return k})),u;return e===!0?u=Ja(r,o,l,d):u=Qa(r,e.halfCheckedKeys,o,l,d),u}function Za(n){var e=te(0),t=le();return Ee(function(){var l=new Map,o=0,c=n.value||{};for(var d in c)if(Object.prototype.hasOwnProperty.call(c,d)){var r=c[d],u=r.level,f=l.get(u);f||(f=new Set,l.set(u,f)),f.add(r),o=Math.max(o,u)}e.value=o,t.value=l}),{maxLevel:e,levelEntities:t}}var et=["motion","motionNodes","motionType","active","eventKey"];const nt=Te({compatConfig:{MODE:3},name:"MotionTreeNode",inheritAttrs:!1,props:D(D({},Qn),{},{active:Boolean,motion:Object,motionNodes:{type:Array},onMotionStart:Function,onMotionEnd:Function,motionType:String}),slots:["title","icon","switcherIcon","checkable"],setup:function(e,t){var l=t.attrs,o=t.slots,c=te(!0),d=Dn(),r=te(!1),u=L(function(){return e.motion?e.motion:Ka()}),f=function(g,p){if(p==="appear"){var N,m;(N=u.value)===null||N===void 0||(m=N.onAfterEnter)===null||m===void 0||m.call(N,g)}else if(p==="leave"){var E,a;(E=u.value)===null||E===void 0||(a=E.onAfterLeave)===null||a===void 0||a.call(E,g)}r.value||e.onMotionEnd(),r.value=!0};return ke(function(){return e.motionNodes},function(){e.motionNodes&&e.motionType==="hide"&&c.value&&Nn(function(){c.value=!1})},{immediate:!0,flush:"post"}),Hn(function(){e.motionNodes&&e.onMotionStart()}),ka(function(){e.motionNodes&&f()}),function(){e.motion;var k=e.motionNodes,g=e.motionType,p=e.active,N=e.eventKey,m=Be(e,et);return k?_(ma,D(D({},u.value),{},{appear:g==="show",onAfterAppear:function(a){return f(a,"appear")},onAfterLeave:function(a){return f(a,"leave")}}),{default:function(){return[ba(_("div",{class:"".concat(d.value.prefixCls,"-treenode-motion")},[k.map(function(a){var h=we({},(qn(a.data),a.data)),K=a.title,P=a.key,B=a.isStart,$=a.isEnd;return delete h.children,_(pn,D(D({},h),{},{title:K,active:p,data:a.data,key:P,eventKey:P,isStart:B,isEnd:$}),o)})]),[[xa,c.value]])]}}):_(pn,D(D({domRef:te,class:l.class,style:l.style},m),{},{active:p,eventKey:N}),o)}}});function at(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=n.length,l=e.length;if(Math.abs(t-l)!==1)return{add:!1,key:null};function o(c,d){var r=new Map;c.forEach(function(f){r.set(f,!0)});var u=d.filter(function(f){return!r.has(f)});return u.length===1?u[0]:null}return t<l?{add:!0,key:o(n,e)}:{add:!1,key:o(e,n)}}function In(n,e,t){var l=n.findIndex(function(r){return r.key===t}),o=n[l+1],c=e.findIndex(function(r){return r.key===t});if(o){var d=e.findIndex(function(r){return r.key===o.key});return e.slice(c+1,d)}return e.slice(c+1)}var tt=["prefixCls","selectable","checkable","disabled","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabindex","onKeydown","onFocus","onBlur","onListChangeStart","onListChangeEnd"],An={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},rt=function(){},Pe="RC_TREE_MOTION_".concat(Math.random()),mn={key:Pe},ta={key:Pe,level:0,index:0,pos:"0",node:mn,nodes:[mn]},Fn={parent:null,children:[],pos:ta.pos,data:mn,title:null,key:Pe,isStart:[],isEnd:[]};function Mn(n,e,t,l){return e===!1||!t?n:n.slice(0,Math.ceil(t/l)+1)}function Bn(n){var e=n.key,t=n.pos;return Re(e,t)}function ot(n){for(var e=String(n.key),t=n;t.parent;)t=t.parent,e="".concat(t.key," > ").concat(e);return e}const lt=Te({compatConfig:{MODE:3},name:"NodeList",inheritAttrs:!1,props:$a,setup:function(e,t){var l=t.expose,o=t.attrs,c=te(),d=te(),r=Jn(),u=r.expandedKeys,f=r.flattenNodes;l({scrollTo:function(K){c.value.scrollTo(K)},getIndentWidth:function(){return d.value.offsetWidth}});var k=le(f.value),g=le([]),p=te(null);function N(){k.value=f.value,g.value=[],p.value=null,e.onListChangeEnd()}var m=Dn();ke([function(){return u.value.slice()},f],function(h,K){var P=Me(h,2),B=P[0],$=P[1],V=Me(K,2),ae=V[0],U=V[1],I=at(ae,B);if(I.key!==null){var Z=e.virtual,w=e.height,O=e.itemHeight;if(I.add){var A=U.findIndex(function(X){var ue=X.key;return ue===I.key}),j=Mn(In(U,$,I.key),Z,w,O),re=U.slice();re.splice(A+1,0,Fn),k.value=re,g.value=j,p.value="show"}else{var q=$.findIndex(function(X){var ue=X.key;return ue===I.key}),ie=Mn(In($,U,I.key),Z,w,O),W=$.slice();W.splice(q+1,0,Fn),k.value=W,g.value=ie,p.value="hide"}}else U!==$&&(k.value=$)}),ke(function(){return m.value.dragging},function(h){h||N()});var E=L(function(){return e.motion===void 0?k.value:f.value}),a=function(){e.onActiveChange(null)};return function(){var h=D(D({},e),o),K=h.prefixCls;h.selectable,h.checkable;var P=h.disabled,B=h.motion,$=h.height,V=h.itemHeight,ae=h.virtual,U=h.focusable,I=h.activeItem,Z=h.focused,w=h.tabindex,O=h.onKeydown,A=h.onFocus,j=h.onBlur,re=h.onListChangeStart;h.onListChangeEnd;var q=Be(h,tt);return _(Ca,null,[Z&&I&&_("span",{style:An,"aria-live":"assertive"},[ot(I)]),_("div",null,[_("input",{style:An,disabled:U===!1||P,tabindex:U!==!1?w:null,onKeydown:O,onFocus:A,onBlur:j,value:"",onChange:rt,"aria-label":"for screen reader"},null)]),_("div",{class:"".concat(K,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"}},[_("div",{class:"".concat(K,"-indent")},[_("div",{ref:d,class:"".concat(K,"-indent-unit")},null)])]),_(Aa,D(D({},Cn(q,["onActiveChange"])),{},{data:E.value,itemKey:Bn,height:$,fullHeight:!1,virtual:ae,itemHeight:V,prefixCls:"".concat(K,"-list"),ref:c,onVisibleChange:function(W,X){var ue=new Set(W),J=X.filter(function(fe){return!ue.has(fe)});J.some(function(fe){return Bn(fe)===Pe})&&N()}}),{default:function(W){var X=W.pos,ue=we({},(qn(W.data),W.data)),J=W.title,fe=W.key,de=W.isStart,ye=W.isEnd,Ce=Re(fe,X);return delete ue.key,delete ue.children,_(nt,D(D({},ue),{},{eventKey:Ce,title:J,active:!!I&&fe===I.key,data:W.data,isStart:de,isEnd:ye,motion:B,motionNodes:fe===Pe?g.value:null,motionType:p.value,onMotionStart:re,onMotionEnd:N,onMousemove:a}),null)}})])}}});function it(n){var e=n.dropPosition,t=n.dropLevelOffset,l=n.indent,o={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:"".concat(2,"px")};switch(e){case-1:o.top=0,o.left="".concat(-t*l,"px");break;case 1:o.bottom=0,o.left="".concat(-t*l,"px");break;case 0:o.bottom=0,o.left="".concat(l);break}return _("div",{style:o},null)}var dt=10;const ct=Te({compatConfig:{MODE:3},name:"Tree",inheritAttrs:!1,slots:["checkable","title","icon","titleRender"],props:Sn(Zn(),{prefixCls:"vc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:it,allowDrop:function(){return!0}}),setup:function(e,t){var l=t.attrs,o=t.slots,c=t.expose,d=te(!1),r={},u=te(),f=le([]),k=le([]),g=le([]),p=le([]),N=le([]),m=le([]),E={},a=Gn({draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null}),h=le([]);ke([function(){return e.treeData},function(){return e.children}],function(){h.value=e.treeData!==void 0?sn(e.treeData).slice():kn(sn(e.children))},{immediate:!0,deep:!0});var K=le({}),P=te(!1),B=te(null),$=te(!1),V=L(function(){return Xe(e.fieldNames)}),ae=te(),U=null,I=null,Z=null,w=L(function(){return{expandedKeysSet:O.value,selectedKeysSet:A.value,loadedKeysSet:j.value,loadingKeysSet:re.value,checkedKeysSet:q.value,halfCheckedKeysSet:ie.value,dragOverNodeKey:a.dragOverNodeKey,dropPosition:a.dropPosition,keyEntities:K.value}}),O=L(function(){return new Set(m.value)}),A=L(function(){return new Set(f.value)}),j=L(function(){return new Set(p.value)}),re=L(function(){return new Set(N.value)}),q=L(function(){return new Set(k.value)}),ie=L(function(){return new Set(g.value)});Ee(function(){if(h.value){var x=na(h.value,{fieldNames:V.value});K.value=D(Y({},Pe,ta),x.keyEntities)}});var W=!1;ke([function(){return e.expandedKeys},function(){return e.autoExpandParent},K],function(x,s){var v=Me(x,2);v[0];var y=v[1],R=Me(s,2);R[0];var F=R[1],T=m.value;if(e.expandedKeys!==void 0||W&&y!==F)T=e.autoExpandParent||!W&&e.defaultExpandParent?Kn(e.expandedKeys,K.value):e.expandedKeys;else if(!W&&e.defaultExpandAll){var S=D({},K.value);delete S[Pe],T=Object.keys(S).map(function(M){return S[M].key})}else!W&&e.defaultExpandedKeys&&(T=e.autoExpandParent||e.defaultExpandParent?Kn(e.defaultExpandedKeys,K.value):e.defaultExpandedKeys);T&&(m.value=T),W=!0},{immediate:!0});var X=le([]);Ee(function(){X.value=qa(h.value,m.value,V.value)}),Ee(function(){e.selectable&&(e.selectedKeys!==void 0?f.value=Ln(e.selectedKeys,e):!W&&e.defaultSelectedKeys&&(f.value=Ln(e.defaultSelectedKeys,e)))});var ue=Za(K),J=ue.maxLevel,fe=ue.levelEntities;Ee(function(){if(e.checkable){var x;if(e.checkedKeys!==void 0?x=vn(e.checkedKeys)||{}:!W&&e.defaultCheckedKeys?x=vn(e.defaultCheckedKeys)||{}:h.value&&(x=vn(e.checkedKeys)||{checkedKeys:k.value,halfCheckedKeys:g.value}),x){var s=x,v=s.checkedKeys,y=v===void 0?[]:v,R=s.halfCheckedKeys,F=R===void 0?[]:R;if(!e.checkStrictly){var T=fn(y,!0,K.value,J.value,fe.value);y=T.checkedKeys,F=T.halfCheckedKeys}k.value=y,g.value=F}}}),Ee(function(){e.loadedKeys&&(p.value=e.loadedKeys)});var de=function(){we(a,{dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})},ye=function(s){ae.value.scrollTo(s)};ke(function(){return e.activeKey},function(){e.activeKey!==void 0&&(B.value=e.activeKey)},{immediate:!0}),ke(B,function(x){Nn(function(){x!==null&&ye({key:x})})},{immediate:!0,flush:"post"});var Ce=function(s){e.expandedKeys===void 0&&(m.value=s)},_e=function(){a.draggingNodeKey!==null&&we(a,{draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),U=null,Z=null},Ae=function(s,v){var y=e.onDragend;a.dragOverNodeKey=null,_e(),y==null||y({event:s,node:v.eventData}),I=null},$e=function x(s){Ae(s,null),window.removeEventListener("dragend",x)},Je=function(s,v){var y=e.onDragstart,R=v.eventKey,F=v.eventData;I=v,U={x:s.clientX,y:s.clientY};var T=De(m.value,R);a.draggingNodeKey=R,a.dragChildrenKeys=Wa(R,K.value),u.value=ae.value.getIndentWidth(),Ce(T),window.addEventListener("dragend",$e),y&&y({event:s,node:F})},Qe=function(s,v){var y=e.onDragenter,R=e.onExpand,F=e.allowDrop,T=e.direction,S=v.pos,M=v.eventKey;if(Z!==M&&(Z=M),!I){de();return}var H=Tn(s,I,v,u.value,U,F,X.value,K.value,O.value,T),z=H.dropPosition,Q=H.dropLevelOffset,ee=H.dropTargetKey,oe=H.dropContainerKey,ce=H.dropTargetPos,ve=H.dropAllowed,se=H.dragOverNodeKey;if(a.dragChildrenKeys.indexOf(ee)!==-1||!ve){de();return}if(r||(r={}),Object.keys(r).forEach(function(ne){clearTimeout(r[ne])}),I.eventKey!==v.eventKey&&(r[S]=window.setTimeout(function(){if(a.draggingNodeKey!==null){var ne=m.value.slice(),he=K.value[v.eventKey];he&&(he.children||[]).length&&(ne=Oe(m.value,v.eventKey)),Ce(ne),R&&R(ne,{node:v.eventData,expanded:!0,nativeEvent:s})}},800)),I.eventKey===ee&&Q===0){de();return}we(a,{dragOverNodeKey:se,dropPosition:z,dropLevelOffset:Q,dropTargetKey:ee,dropContainerKey:oe,dropTargetPos:ce,dropAllowed:ve}),y&&y({event:s,node:v.eventData,expandedKeys:m.value})},Ze=function(s,v){var y=e.onDragover,R=e.allowDrop,F=e.direction;if(I){var T=Tn(s,I,v,u.value,U,R,X.value,K.value,O.value,F),S=T.dropPosition,M=T.dropLevelOffset,H=T.dropTargetKey,z=T.dropContainerKey,Q=T.dropAllowed,ee=T.dropTargetPos,oe=T.dragOverNodeKey;a.dragChildrenKeys.indexOf(H)!==-1||!Q||(I.eventKey===H&&M===0?a.dropPosition===null&&a.dropLevelOffset===null&&a.dropTargetKey===null&&a.dropContainerKey===null&&a.dropTargetPos===null&&a.dropAllowed===!1&&a.dragOverNodeKey===null||de():S===a.dropPosition&&M===a.dropLevelOffset&&H===a.dropTargetKey&&z===a.dropContainerKey&&ee===a.dropTargetPos&&Q===a.dropAllowed&&oe===a.dragOverNodeKey||we(a,{dropPosition:S,dropLevelOffset:M,dropTargetKey:H,dropContainerKey:z,dropTargetPos:ee,dropAllowed:Q,dragOverNodeKey:oe}),y&&y({event:s,node:v.eventData}))}},en=function(s,v){Z===v.eventKey&&!s.currentTarget.contains(s.relatedTarget)&&(de(),Z=null);var y=e.onDragleave;y&&y({event:s,node:v.eventData})},nn=function(s,v){var y,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,F=a.dragChildrenKeys,T=a.dropPosition,S=a.dropTargetKey,M=a.dropTargetPos,H=a.dropAllowed;if(H){var z=e.onDrop;if(a.dragOverNodeKey=null,_e(),S!==null){var Q=D(D({},bn(S,sn(w.value))),{},{active:((y=C.value)===null||y===void 0?void 0:y.key)===S,data:K.value[S].node});F.indexOf(S);var ee=En(M),oe={event:s,node:xn(Q),dragNode:I?I.eventData:null,dragNodesKeys:[I.eventKey].concat(F),dropToGap:T!==0,dropPosition:T+Number(ee[ee.length-1])};R||z==null||z(oe),I=null}}},an=function(s,v){var y=e.onClick;y&&y(s,v)},tn=function(s,v){var y=e.onDblclick;y&&y(s,v)},je=function(s,v){var y=f.value,R=e.onSelect,F=e.multiple,T=v.selected,S=v[V.value.key],M=!T;M?F?y=Oe(y,S):y=[S]:y=De(y,S);var H=K.value,z=y.map(function(Q){var ee=H[Q];return ee?ee.node:null}).filter(function(Q){return Q});e.selectedKeys===void 0&&(f.value=y),R&&R(y,{event:"select",selected:M,node:v,selectedNodes:z,nativeEvent:s})},Ge=function(s,v,y){var R=e.checkStrictly,F=e.onCheck,T=v[V.value.key],S,M={event:"check",node:v,checked:y,nativeEvent:s},H=K.value;if(R){var z=y?Oe(k.value,T):De(k.value,T),Q=De(g.value,T);S={checked:z,halfChecked:Q},M.checkedNodes=z.map(function(ne){return H[ne]}).filter(function(ne){return ne}).map(function(ne){return ne.node}),e.checkedKeys===void 0&&(k.value=z)}else{var ee=fn([].concat(me(k.value),[T]),!0,H,J.value,fe.value),oe=ee.checkedKeys,ce=ee.halfCheckedKeys;if(!y){var ve=new Set(oe);ve.delete(T);var se=fn(Array.from(ve),{checked:!1,halfCheckedKeys:ce},H,J.value,fe.value);oe=se.checkedKeys,ce=se.halfCheckedKeys}S=oe,M.checkedNodes=[],M.checkedNodesPositions=[],M.halfCheckedKeys=ce,oe.forEach(function(ne){var he=H[ne];if(he){var ge=he.node,Se=he.pos;M.checkedNodes.push(ge),M.checkedNodesPositions.push({node:ge,pos:Se})}}),e.checkedKeys===void 0&&(k.value=oe,g.value=ce)}F&&F(S,M)},He=function(s){var v=s[V.value.key],y=new Promise(function(R,F){var T=e.loadData,S=e.onLoad;if(!T||j.value.has(v)||re.value.has(v))return null;var M=T(s);M.then(function(){var H=Oe(p.value,v),z=De(N.value,v);S&&S(H,{event:"load",node:s}),e.loadedKeys===void 0&&(p.value=H),N.value=z,R()}).catch(function(H){var z=De(N.value,v);if(N.value=z,E[v]=(E[v]||0)+1,E[v]>=dt){var Q=Oe(p.value,v);e.loadedKeys===void 0&&(p.value=Q),R()}F(H)}),N.value=Oe(N.value,v)});return y.catch(function(){}),y},rn=function(s,v){var y=e.onMouseenter;y&&y({event:s,node:v})},on=function(s,v){var y=e.onMouseleave;y&&y({event:s,node:v})},ln=function(s,v){var y=e.onRightClick;y&&(s.preventDefault(),y({event:s,node:v}))},We=function(s){var v=e.onFocus;P.value=!0,v&&v(s)},dn=function(s){var v=e.onBlur;P.value=!1,Ne(null),v&&v(s)},Le=function(s,v){var y=m.value,R=e.onExpand,F=e.loadData,T=v.expanded,S=v[V.value.key];if(!$.value){y.indexOf(S);var M=!T;if(M?y=Oe(y,S):y=De(y,S),Ce(y),R&&R(y,{node:v,expanded:M,nativeEvent:s}),M&&F){var H=He(v);H&&H.then(function(){}).catch(function(z){var Q=De(m.value,S);Ce(Q),Promise.reject(z)})}}},Ue=function(){$.value=!0},cn=function(){setTimeout(function(){$.value=!1})},Ne=function(s){var v=e.onActiveChange;B.value!==s&&(e.activeKey!==void 0&&(B.value=s),s!==null&&ye({key:s}),v&&v(s))},C=L(function(){return B.value===null?null:X.value.find(function(x){var s=x.key;return s===B.value})||null}),i=function(s){var v=X.value.findIndex(function(F){var T=F.key;return T===B.value});v===-1&&s<0&&(v=X.value.length),v=(v+s+X.value.length)%X.value.length;var y=X.value[v];if(y){var R=y.key;Ne(R)}else Ne(null)},b=L(function(){return xn(D(D({},bn(B.value,w.value)),{},{data:C.value.data,active:!0}))}),G=function(s){var v=e.onKeydown,y=e.checkable,R=e.selectable;switch(s.which){case Ie.UP:{i(-1),s.preventDefault();break}case Ie.DOWN:{i(1),s.preventDefault();break}}var F=C.value;if(F&&F.data){var T=F.data.isLeaf===!1||!!(F.data.children||[]).length,S=b.value;switch(s.which){case Ie.LEFT:{T&&O.value.has(B.value)?Le({},S):F.parent&&Ne(F.parent.key),s.preventDefault();break}case Ie.RIGHT:{T&&!O.value.has(B.value)?Le({},S):F.children&&F.children.length&&Ne(F.children[0].key),s.preventDefault();break}case Ie.ENTER:case Ie.SPACE:{y&&!S.disabled&&S.checkable!==!1&&!S.disableCheckbox?Ge({},S,!q.value.has(B.value)):!y&&R&&!S.disabled&&S.selectable!==!1&&je({},S);break}}}v&&v(s)};return c({onNodeExpand:Le,scrollTo:ye,onKeydown:G,selectedKeys:L(function(){return f.value}),checkedKeys:L(function(){return k.value}),halfCheckedKeys:L(function(){return g.value}),loadedKeys:L(function(){return p.value}),loadingKeys:L(function(){return N.value}),expandedKeys:L(function(){return m.value})}),Na(function(){window.removeEventListener("dragend",$e),d.value=!0}),Ba({expandedKeys:m,selectedKeys:f,loadedKeys:p,loadingKeys:N,checkedKeys:k,halfCheckedKeys:g,expandedKeysSet:O,selectedKeysSet:A,loadedKeysSet:j,loadingKeysSet:re,checkedKeysSet:q,halfCheckedKeysSet:ie,flattenNodes:X}),function(){var x,s=a.draggingNodeKey,v=a.dropLevelOffset,y=a.dropContainerKey,R=a.dropTargetKey,F=a.dropPosition,T=a.dragOverNodeKey,S=e.prefixCls,M=e.showLine,H=e.focusable,z=e.tabindex,Q=z===void 0?0:z,ee=e.selectable,oe=e.showIcon,ce=e.icon,ve=ce===void 0?o.icon:ce,se=e.switcherIcon,ne=e.draggable,he=e.checkable,ge=e.checkStrictly,Se=e.disabled,Ve=e.motion,un=e.loadData,oa=e.filterTreeNode,la=e.height,ia=e.itemHeight,da=e.virtual,ca=e.dropIndicatorRender,ua=e.onContextmenu,sa=e.onScroll,va=e.direction,fa=l.class,ya=l.style,ha=Yn(D(D({},e),l),{aria:!0,data:!0}),Ye;return ne&&(Fe(ne)==="object"?Ye=ne:typeof ne=="function"?Ye={nodeDraggable:ne}:Ye={}),_(Ma,{value:{prefixCls:S,selectable:ee,showIcon:oe,icon:ve,switcherIcon:se,draggable:Ye,draggingNodeKey:s,checkable:he,customCheckable:o.checkable,checkStrictly:ge,disabled:Se,keyEntities:K.value,dropLevelOffset:v,dropContainerKey:y,dropTargetKey:R,dropPosition:F,dragOverNodeKey:T,dragging:s!==null,indent:u.value,direction:va,dropIndicatorRender:ca,loadData:un,filterTreeNode:oa,onNodeClick:an,onNodeDoubleClick:tn,onNodeExpand:Le,onNodeSelect:je,onNodeCheck:Ge,onNodeLoad:He,onNodeMouseEnter:rn,onNodeMouseLeave:on,onNodeContextMenu:ln,onNodeDragStart:Je,onNodeDragEnter:Qe,onNodeDragOver:Ze,onNodeDragLeave:en,onNodeDragEnd:Ae,onNodeDrop:nn,slots:o}},{default:function(){return[_("div",{role:"tree",class:Ke(S,fa,(x={},Y(x,"".concat(S,"-show-line"),M),Y(x,"".concat(S,"-focused"),P.value),Y(x,"".concat(S,"-active-focused"),B.value!==null),x))},[_(lt,D({ref:ae,prefixCls:S,style:ya,disabled:Se,selectable:ee,checkable:!!he,motion:Ve,height:la,itemHeight:ia,virtual:da,focusable:H,focused:P.value,tabindex:Q,activeItem:C.value,onFocus:We,onBlur:dn,onKeydown:G,onActiveChange:Ne,onListChangeStart:Ue,onListChangeEnd:cn,onContextmenu:ua,onScroll:sa},ha),null)])]}})}}});function ut(n,e,t,l){var o=l.isLeaf,c=l.expanded,d=l.loading,r=e;if(d)return _(Sa,{class:"".concat(n,"-switcher-loading-icon")},null);var u;t&&Fe(t)==="object"&&(u=t.showLeafIcon);var f=null,k="".concat(n,"-switcher-icon");return o?(t&&(Fe(t)==="object"&&!u?f=_("span",{class:"".concat(n,"-switcher-leaf-line")},null):f=_(Un,{class:"".concat(n,"-switcher-line-icon")},null)),f):(f=_(Da,{class:k},null),t&&(f=c?_(Ea,{class:"".concat(n,"-switcher-line-icon")},null):_(wa,{class:"".concat(n,"-switcher-line-icon")},null)),typeof e=="function"?r=e(D(D({},l),{},{defaultIcon:f,switcherCls:k})):Oa(r)&&(r=Pa(r,{class:k})),r||f)}var Rn=4;function st(n){var e,t=n.dropPosition,l=n.dropLevelOffset,o=n.prefixCls,c=n.indent,d=n.direction,r=d===void 0?"ltr":d,u=r==="ltr"?"left":"right",f=r==="ltr"?"right":"left",k=(e={},Y(e,u,"".concat(-l*c+Rn,"px")),Y(e,f,0),e);switch(t){case-1:k.top="".concat(-3,"px");break;case 1:k.bottom="".concat(-3,"px");break;default:k.bottom="".concat(-3,"px"),k[u]="".concat(c+Rn,"px");break}return _("div",{style:k,class:"".concat(o,"-drop-indicator")},null)}var ra=function(){var e=Zn();return D(D({},e),{},{showLine:{type:[Boolean,Object],default:void 0},multiple:{type:Boolean,default:void 0},autoExpandParent:{type:Boolean,default:void 0},checkStrictly:{type:Boolean,default:void 0},checkable:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},defaultExpandAll:{type:Boolean,default:void 0},defaultExpandParent:{type:Boolean,default:void 0},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},checkedKeys:{type:[Array,Object]},defaultCheckedKeys:{type:Array},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},selectable:{type:Boolean,default:void 0},loadedKeys:{type:Array},draggable:{type:Boolean,default:void 0},showIcon:{type:Boolean,default:void 0},icon:{type:Function},switcherIcon:xe.any,prefixCls:String,replaceFields:{type:Object},blockNode:{type:Boolean,default:void 0},openAnimation:xe.any,onDoubleclick:e.onDblclick,"onUpdate:selectedKeys":Function,"onUpdate:checkedKeys":Function,"onUpdate:expandedKeys":Function})};const qe=Te({compatConfig:{MODE:3},name:"ATree",inheritAttrs:!1,props:Sn(ra(),{checkable:!1,selectable:!0,showIcon:!1,blockNode:!1}),slots:["icon","title","switcherIcon","titleRender"],setup:function(e,t){var l=t.attrs,o=t.expose,c=t.emit,d=t.slots;jn(!(e.treeData===void 0&&d.default));var r=Vn("tree",e),u=r.prefixCls,f=r.direction,k=r.virtual,g=te(),p=function(h){var K;(K=g.value)===null||K===void 0||K.scrollTo(h)};o({treeRef:g,onNodeExpand:function(){for(var h,K=arguments.length,P=new Array(K),B=0;B<K;B++)P[B]=arguments[B];(h=g.value)===null||h===void 0||h.onNodeExpand.apply(h,P)},scrollTo:p,selectedKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.selectedKeys}),checkedKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.checkedKeys}),halfCheckedKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.halfCheckedKeys}),loadedKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.loadedKeys}),loadingKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.loadingKeys}),expandedKeys:L(function(){var a;return(a=g.value)===null||a===void 0?void 0:a.expandedKeys})}),Ee(function(){Ta(e.replaceFields===void 0,"Tree","`replaceFields` is deprecated, please use fieldNames instead")});var N=function(h,K){c("update:checkedKeys",h),c("check",h,K)},m=function(h,K){c("update:expandedKeys",h),c("expand",h,K)},E=function(h,K){c("update:selectedKeys",h),c("select",h,K)};return function(){var a,h=e.showIcon,K=e.showLine,P=e.switcherIcon,B=P===void 0?d.switcherIcon:P,$=e.icon,V=$===void 0?d.icon:$,ae=e.blockNode,U=e.checkable,I=e.selectable,Z=e.fieldNames,w=Z===void 0?e.replaceFields:Z,O=e.motion,A=O===void 0?e.openAnimation:O,j=e.itemHeight,re=j===void 0?28:j,q=e.onDoubleclick,ie=e.onDblclick,W=D(D(D({},l),Cn(e,["onUpdate:checkedKeys","onUpdate:expandedKeys","onUpdate:selectedKeys","onDoubleclick"])),{},{showLine:!!K,dropIndicatorRender:st,fieldNames:w,icon:V,itemHeight:re}),X=d.default?ze(d.default()):void 0;return _(ct,D(D({},W),{},{virtual:k.value,motion:A,ref:g,prefixCls:u.value,class:Ke((a={},Y(a,"".concat(u.value,"-icon-hide"),!h),Y(a,"".concat(u.value,"-block-node"),ae),Y(a,"".concat(u.value,"-unselectable"),!I),Y(a,"".concat(u.value,"-rtl"),f.value==="rtl"),a),l.class),direction:f.value,checkable:U,selectable:I,switcherIcon:function(J){return ut(u.value,B,K,J)},onCheck:N,onExpand:m,onSelect:E,onDblclick:ie||q,children:X}),D(D({},d),{},{checkable:function(){return _("span",{class:"".concat(u.value,"-checkbox-inner")},null)}}))}}});var be;(function(n){n[n.None=0]="None",n[n.Start=1]="Start",n[n.End=2]="End"})(be||(be={}));function wn(n,e,t){function l(o){var c=o[e.key],d=o[e.children];t(c,o)!==!1&&wn(d||[],e,t)}n.forEach(l)}function vt(n){var e=n.treeData,t=n.expandedKeys,l=n.startKey,o=n.endKey,c=n.fieldNames,d=c===void 0?{title:"title",key:"key",children:"children"}:c,r=[],u=be.None;if(l&&l===o)return[l];if(!l||!o)return[];function f(k){return k===l||k===o}return wn(e,d,function(k){if(u===be.End)return!1;if(f(k)){if(r.push(k),u===be.None)u=be.Start;else if(u===be.Start)return u=be.End,!1}else u===be.Start&&r.push(k);return t.indexOf(k)!==-1}),r}function yn(n,e,t){var l=me(e),o=[];return wn(n,t,function(c,d){var r=l.indexOf(c);return r!==-1&&(o.push(d),l.splice(r,1)),!!l.length}),o}var ft=["icon","blockNode"],yt=function(){return D(D({},ra()),{},{expandAction:{type:[Boolean,String]}})};function ht(n){var e=n.isLeaf,t=n.expanded;return e?_(Un,null,null):t?_(La,null,null):_(Ia,null,null)}const hn=Te({compatConfig:{MODE:3},name:"ADirectoryTree",inheritAttrs:!1,props:Sn(yt(),{showIcon:!0,expandAction:"click"}),slots:["icon","title","switcherIcon","titleRender"],setup:function(e,t){var l,o=t.attrs,c=t.slots,d=t.emit,r=t.expose,u=te(e.treeData||kn(ze((l=c.default)===null||l===void 0?void 0:l.call(c))));ke(function(){return e.treeData},function(){u.value=e.treeData}),Wn(function(){Nn(function(){if(e.treeData===void 0&&c.default){var w;u.value=kn(ze((w=c.default)===null||w===void 0?void 0:w.call(c)))}})});var f=te(),k=te(),g=L(function(){return Xe(e.fieldNames)}),p=te(),N=function(O){var A;(A=p.value)===null||A===void 0||A.scrollTo(O)};r({scrollTo:N,selectedKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.selectedKeys}),checkedKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.checkedKeys}),halfCheckedKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.halfCheckedKeys}),loadedKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.loadedKeys}),loadingKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.loadingKeys}),expandedKeys:L(function(){var w;return(w=p.value)===null||w===void 0?void 0:w.expandedKeys})});var m=function(){var O=na(u.value,{fieldNames:g.value}),A=O.keyEntities,j;return e.defaultExpandAll?j=Object.keys(A):e.defaultExpandParent?j=Kn(e.expandedKeys||e.defaultExpandedKeys||[],A):j=e.expandedKeys||e.defaultExpandedKeys,j},E=te(e.selectedKeys||e.defaultSelectedKeys||[]),a=te(m());ke(function(){return e.selectedKeys},function(){e.selectedKeys!==void 0&&(E.value=e.selectedKeys)},{immediate:!0}),ke(function(){return e.expandedKeys},function(){e.expandedKeys!==void 0&&(a.value=e.expandedKeys)},{immediate:!0});var h=function(O,A){var j=A.isLeaf;j||O.shiftKey||O.metaKey||O.ctrlKey||p.value.onNodeExpand(O,A)},K=Fa(h,200,{leading:!0}),P=function(O,A){e.expandedKeys===void 0&&(a.value=O),d("update:expandedKeys",O),d("expand",O,A)},B=function(O,A){var j=e.expandAction;j==="click"&&K(O,A),d("click",O,A)},$=function(O,A){var j=e.expandAction;(j==="dblclick"||j==="doubleclick")&&K(O,A),d("doubleclick",O,A),d("dblclick",O,A)},V=function(O,A){var j=e.multiple,re=A.node,q=A.nativeEvent,ie=re[g.value.key],W=D(D({},A),{},{selected:!0}),X=(q==null?void 0:q.ctrlKey)||(q==null?void 0:q.metaKey),ue=q==null?void 0:q.shiftKey,J;j&&X?(J=O,f.value=ie,k.value=J,W.selectedNodes=yn(u.value,J,g.value)):j&&ue?(J=Array.from(new Set([].concat(me(k.value||[]),me(vt({treeData:u.value,expandedKeys:a.value,startKey:ie,endKey:f.value,fieldNames:g.value}))))),W.selectedNodes=yn(u.value,J,g.value)):(J=[ie],f.value=ie,k.value=J,W.selectedNodes=yn(u.value,J,g.value)),d("update:selectedKeys",J),d("select",J,W),e.selectedKeys===void 0&&(E.value=J)},ae=function(O,A){d("update:checkedKeys",O),d("check",O,A)},U=Vn("tree",e),I=U.prefixCls,Z=U.direction;return function(){var w=Ke("".concat(I.value,"-directory"),Y({},"".concat(I.value,"-directory-rtl"),Z.value==="rtl"),o.class),O=e.icon,A=O===void 0?c.icon:O,j=e.blockNode,re=j===void 0?!0:j,q=Be(e,ft);return _(qe,D(D(D({},o),{},{icon:A||ht,ref:p,blockNode:re},q),{},{prefixCls:I.value,class:w,expandedKeys:a.value,selectedKeys:E.value,onSelect:V,onClick:B,onDblclick:$,onExpand:P,onCheck:ae}),c)}}});var gn=pn;const bt=we(qe,{DirectoryTree:hn,TreeNode:gn,install:function(e){return e.component(qe.name,qe),e.component(gn.name,gn),e.component(hn.name,hn),e}});export{bt as _,fn as a,De as b,na as c,Oe as d,pe as e,Za as u};
