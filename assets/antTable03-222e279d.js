import{e as $,x as y,o,c as m,d as p,j as k,N as u,W as s,O as E,Q as H,U as f,V as x,S as C,T as L,g as K,aS as U,p as z,b as F,aT as A,_ as M}from"./index-28e7baee.js";import{_ as Q,S as W}from"./index-9c3ec408.js";import"./index-daac8612.js";import{I as q}from"./index-99cbf15b.js";import"./index-2b53710f.js";import{_ as G}from"./markDownBox-eba479d5.js";import"./fromPairs-e099444b.js";import"./debounce-2e5a75af.js";import"./isSymbol-5cdea542.js";import"./scrollTo-a9730ee0.js";import"./isPlainObject-c94aa001.js";const J=_=>(z("data-v-0f2e9715"),_=_(),F(),_),P={class:"common_container"},X={class:"mt10"},Y=J(()=>p("div",null,[p("span",{class:"ft20 fw700 mr8"},"AntTable"),p("div",null,"表格按列展示，后台返回的是每一列的数据，前台对数据进行处理并展示")],-1)),Z={class:"mt15"},ee=["onClick"],te={key:0},ne=["onClick"],ae={key:1},ie=$({__name:"antTable03",setup(_){const R=y({spinning:!1});function w(){const r={id:"index",programmeId:"index",programme:"序号",layoutCharacteristics:"总图布置形式及布置特点",coverAnArea:"占地面积",floorSpace:"建筑面积",tracklayinglength:"铺轨长度",greenArea:"绿化面积",greeningRate:"绿化率",buildingDensity:"建筑密度",isRecommendation:"是否推荐方案"},b={id:"first",programmeId:"first",programme:"技术指标名称",layoutCharacteristics:"总图布置形式及布置特点",coverAnArea:"占地面积",floorSpace:"建筑面积",tracklayinglength:"铺轨长度",greenArea:"绿化面积",greeningRate:"绿化率",buildingDensity:"建筑密度",isRecommendation:"是否推荐方案"},d={id:"last",programmeId:"last",programme:"-",layoutCharacteristics:"",coverAnArea:"",floorSpace:"",tracklayinglength:"",greenArea:"",greeningRate:"",buildingDensity:"",isRecommendation:""},g={id:"add",programmeId:"add",programme:"+",layoutCharacteristics:"",coverAnArea:"",floorSpace:"",tracklayinglength:"",greenArea:"",greeningRate:"",buildingDensity:"",isRecommendation:""};return{table:y({loading:!1,total:0,list:[],preSubmitList:[],selectKeys:[],columns:[]}),firstColumn:b,indexColumn:r,lastColumn:d,addColumn:g}}const{table:e,firstColumn:I,indexColumn:v,lastColumn:T,addColumn:D}=w();function j(){const r=y({activeIndex:void 0,currentRow:null,currentColumn:void 0}),b=(a,n,t,i)=>{r.currentRow=null,r.activeIndex=i,r.currentColumn=t.dataIndex,r.currentRow=a},d=()=>{console.log(e.list),r.activeIndex=void 0,r.currentColumn=void 0},g=()=>{try{e.loading=!0,e.list=[],e.preSubmitList=[],e.columns=[];const a=[{id:479645901656134,programmeId:479639508996169,programme:"方案一",layoutCharacteristics:"总图布置形式及布置特点01",coverAnArea:"占地面积01",floorSpace:"建筑面积",tracklayinglength:"铺轨长度",greenArea:"绿化面积",greeningRate:"绿化率",buildingDensity:"建筑密度",isRecommendation:"是否推荐方案"},{id:479949655281735,programmeId:479949655281735,programme:"方案二",layoutCharacteristics:"总图布置形式及布置特点02",coverAnArea:"占地面积02",floorSpace:"建筑面积",tracklayinglength:"铺轨长度",greenArea:"绿化面积",greeningRate:"绿化率",buildingDensity:"建筑密度",isRecommendation:"是否推荐方案"}];a.length?(e.preSubmitList=a.map(n=>n),e.preSubmitList.unshift(I),e.preSubmitList.unshift(v),e.preSubmitList.push(D)):(A.warning("未获取到相关内容"),e.preSubmitList.unshift(T),e.preSubmitList.unshift(I),e.preSubmitList.unshift(v),e.loading=!1),e.columns=e.preSubmitList.map(n=>{let t="";return n.programmeId==="index"&&(t="80px"),{id:n.id,title:n.programme,key:n.programmeId,dataIndex:n.programmeId,align:"center",width:t}});for(let n=1;n<Object.keys(e.preSubmitList[0]).length;n++){const t={};e.columns.forEach((i,c)=>{["programmeId","programme","id"].includes(Object.keys(e.preSubmitList[0])[n])||(t[i.dataIndex]=e.preSubmitList[c][Object.keys(e.preSubmitList[0])[n]])}),Object.keys(t).length&&e.list.push(t)}e.loading=!1}catch(a){console.log("err ",a)}};let l=3;const h=a=>{if(a.key==="first"||a.key==="last")return!1;if(a.key==="add"){e.list=[],e.columns=[];const n={id:l,programmeId:l,programme:`方案${l}`,layoutCharacteristics:`总图布置形式及布置特点${l}`,coverAnArea:"占地面积02",floorSpace:"建筑面积",tracklayinglength:"铺轨长度",greenArea:"绿化面积",greeningRate:"绿化率",buildingDensity:"建筑密度",isRecommendation:"是否推荐方案"};e.preSubmitList.splice(e.preSubmitList.length-1,0,n),e.columns=e.preSubmitList.map(t=>{let i="";return t.programmeId==="index"&&(i="80px"),{id:t.id,title:t.programme,key:t.programmeId,dataIndex:t.programmeId,align:"center",width:i}});for(let t=1;t<Object.keys(e.preSubmitList[0]).length;t++){const i={};e.columns.forEach((c,V)=>{["programmeId","programme","id"].includes(Object.keys(e.preSubmitList[0])[t])||(i[c.dataIndex]=e.preSubmitList[V][Object.keys(e.preSubmitList[0])[t]])}),Object.keys(i).length&&e.list.push(i)}l++}A.success("点击了表头")};return K(()=>{g()}),{clickTabelHeader:h,edit:r,handleCellClick:b,handleBlur:d}}const{clickTabelHeader:B,edit:S,handleCellClick:O,handleBlur:N}=j();return(r,b)=>{const d=U,g=q,l=Q,h=W;return o(),m("div",P,[p("div",X,[k(G,{url:"static/file/md/demo/antDesign/table/antTable03.md"},{default:u(()=>[p("div",null,[Y,p("div",Z,[k(h,{spinning:R.spinning,tip:"Loading..."},{default:u(()=>[k(l,{loading:s(e).loading,"data-source":s(e).list,columns:s(e).columns,bordered:!0,size:"small",rowKey:a=>a.id,style:{width:"100%",background:"border-box"},scroll:{y:500},pagination:!1},{headerCell:u(({column:a})=>[(o(!0),m(E,null,H(s(e).columns,n=>(o(),m("div",{key:n.programmeId,class:"pointer",onClick:t=>s(B)(n)},[a.key===n.key?(o(),m("div",te,f(n.title),1)):x("",!0)],8,ee))),128))]),bodyCell:u(({record:a,text:n,column:t,index:i})=>[t.dataIndex==="index"?(o(),C(d,{key:0},{default:u(()=>[L(f(Number(i)+1),1)]),_:2},1024)):["first","last","add"].includes(t.dataIndex)?(o(),C(d,{key:1},{default:u(()=>[L(f(a[t.dataIndex]),1)]),_:2},1024)):[6,7].includes(i)?(o(),m("div",{key:2,onClick:c=>s(O)(a,n,t,i)},[s(S).activeIndex===i&&s(S).currentColumn===t.dataIndex?(o(),C(g,{key:0,value:a[t.dataIndex],"onUpdate:value":c=>a[t.dataIndex]=c,allowClear:!0,onBlur:s(N)},null,8,["value","onUpdate:value","onBlur"])):(o(),m("div",ae,f(a[t.dataIndex]),1))],8,ne)):x("",!0)]),_:1},8,["loading","data-source","columns","rowKey"])]),_:1},8,["spinning"])])])]),_:1},8,["url"])])])}}});const be=M(ie,[["__scopeId","data-v-0f2e9715"]]);export{be as default};
