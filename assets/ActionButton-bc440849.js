import{r as f,K as p,e as O,g as h,j as P,F as c,b2 as k,aR as F}from"./index-28e7baee.js";var R=function(){var e=f(!1);return p(function(){e.value=!0}),e};const $=R;var x={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:Object,emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function y(r){return!!(r&&r.then)}const j=O({compatConfig:{MODE:3},name:"ActionButton",props:x,setup:function(e,b){var C=b.slots,u=f(!1),v=f(),l=f(!1),d,m=$();h(function(){e.autofocus&&(d=setTimeout(function(){var t;return(t=v.value.$el)===null||t===void 0?void 0:t.focus()}))}),p(function(){clearTimeout(d)});var g=function(o){var n=e.close;y(o)&&(l.value=!0,o.then(function(){m.value||(l.value=!1),n.apply(void 0,arguments),u.value=!1},function(i){console.error(i),m.value||(l.value=!1),u.value=!1}))},B=function(o){var n=e.actionFn,i=e.close,s=i===void 0?function(){}:i;if(!u.value){if(u.value=!0,!n){s();return}var a;if(e.emitEvent){if(a=n(o),e.quitOnNullishReturnValue&&!y(a)){u.value=!1,s(o);return}}else if(n.length)a=n(s),u.value=!1;else if(a=n(),!a){s();return}g(a)}};return function(){var t=e.type,o=e.prefixCls,n=e.buttonProps;return P(F,c(c(c({},k(t)),{},{onClick:B,loading:l.value,prefixCls:o},n),{},{ref:v}),C)}}});export{j as A};
